<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>URL shortener</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
          crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body class="bg-dark">
<div class="container">
    <div class="row">
        <div class="card">
            <div class="card-header">Buscador de urls de divas</div>
            <div class="card-body">
            <div class="my-4 w-100">
                <select name="id_select" id="id_select" onchange="copySelection()">
                    {% for item in items %}
                        <option value="{{ root_url }}{{ item.short }}">{{ item.descr }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <div class="alert alert-success" id="id_alert">Copiado</div>
            </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    $(document).ready(function(){
        $('#id_alert').attr('hidden', true);
        $('#id_select').select2();
    });
    function copySelection(){
        const url = $('#id_select option:selected').val();
        navigator.clipboard.writeText(url).then(function(){
            const toast = $('#id_alert')
            toast.attr('hidden', false)
            setTimeout(function (){
                toast.attr('hidden', true)
            }, 1000)
        });
    }
</script>
</html>